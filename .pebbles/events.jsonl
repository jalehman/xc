{"type":"create","timestamp":"2026-02-07T05:36:06.828096Z","issue_id":"xc-0fa","payload":{"description":"Every CLI command should display accumulated API spend at the bottom of output. Show spend over last hour, day, week, and month.\n\nImplementation:\n- Store request log in ~/.xc/usage.jsonl (one line per API call: timestamp, endpoint, estimated cost)\n- After each command completes, read the log and display a compact footer like:\n  `Cost: $0.02 (1h) · $0.15 (24h) · $0.89 (7d) · $3.40 (30d)`\n- Cross-reference with GET /2/usage/tweets for official numbers when available\n- Support --quiet to suppress the cost footer\n- Support xc cost for a detailed breakdown\n- Budget enforcement from the spec (xc budget set --daily 2.00 --action block)\n\nState directory: ~/.xc/ (not ~/.config/xc/ — simpler)\n- ~/.xc/config.json (auth + settings, migrate from ~/.config/xc/)\n- ~/.xc/usage.jsonl (request log)\n- ~/.xc/budget.json (budget config)","priority":"2","title":"Cost tracking: show accumulated spend after every command","type":"task"}}
{"type":"create","timestamp":"2026-02-07T05:36:11.235131Z","issue_id":"xc-1bf","payload":{"description":"Move config storage from ~/.config/xc/ to ~/.xc/ for simplicity. Store auth, usage log, and budget config all under ~/.xc/:\n- ~/.xc/config.json (accounts + auth credentials)\n- ~/.xc/usage.jsonl (per-request cost log)\n- ~/.xc/budget.json (spending limits)","priority":"2","title":"Migrate config directory to ~/.xc/","type":"task"}}
{"type":"create","timestamp":"2026-02-07T05:39:51.597187Z","issue_id":"xc-057","payload":{"description":"All basic CLI commands: search, post, user, timeline, like/unlike, usage, whoami. XcBuilder2 worker is currently building these.","priority":"2","title":"Core CLI Commands","type":"epic"}}
{"type":"create","timestamp":"2026-02-07T05:39:58.151272Z","issue_id":"xc-924","payload":{"description":"Replace hand-rolled HTTP/OAuth with @xdevplatform/xdk SDK. XcBuilder2 is doing this as part of core commands.","priority":"2","title":"SDK Migration","type":"epic"}}
{"type":"create","timestamp":"2026-02-07T05:39:58.16946Z","issue_id":"xc-ac6","payload":{"description":"Per-request cost logging, accumulated spend display after every command, budget enforcement.","priority":"2","title":"Cost Tracking \u0026 Budgets","type":"epic"}}
{"type":"create","timestamp":"2026-02-07T05:39:58.188977Z","issue_id":"xc-2b2","payload":{"description":"Real-time filtered stream: add/remove rules, connect, output posts as they arrive.","priority":"2","title":"Streaming","type":"epic"}}
{"type":"create","timestamp":"2026-02-07T05:39:58.207928Z","issue_id":"xc-80c","payload":{"description":"Media upload, DMs, lists, bookmarks, community notes, news search, threads.","priority":"2","title":"Advanced Features","type":"epic"}}
{"type":"create","timestamp":"2026-02-07T05:40:03.174053Z","issue_id":"xc-3e4","payload":{"description":"Replace src/lib/oauth.ts with @xdevplatform/xdk OAuth2 + generateCodeVerifier/generateCodeChallenge. Keep local token storage in config.ts.","priority":"2","title":"Refactor auth to use SDK OAuth2 class","type":"task"}}
{"type":"dep_add","timestamp":"2026-02-07T05:40:03.211597Z","issue_id":"xc-924","payload":{"dep_type":"blocks","depends_on":"xc-ac6"}}
{"type":"dep_add","timestamp":"2026-02-07T05:40:07.491571Z","issue_id":"xc-924","payload":{"dep_type":"blocks","depends_on":"xc-3e4"}}
{"type":"create","timestamp":"2026-02-07T05:40:07.512459Z","issue_id":"xc-160","payload":{"description":"Export getClient() that creates @xdevplatform/xdk Client from stored credentials. Auto-refresh tokens. All commands use this.","priority":"2","title":"Replace api.ts with SDK Client wrapper","type":"task"}}
{"type":"dep_add","timestamp":"2026-02-07T05:40:10.67127Z","issue_id":"xc-924","payload":{"dep_type":"blocks","depends_on":"xc-160"}}
{"type":"create","timestamp":"2026-02-07T05:40:15.557518Z","issue_id":"xc-8bb","payload":{"description":"Log every API request to ~/.xc/usage.jsonl with timestamp, endpoint, method, estimated cost. Hook into SDK client or wrap calls.","priority":"2","title":"Request cost logger middleware","type":"task"}}
{"type":"dep_add","timestamp":"2026-02-07T05:40:15.593898Z","issue_id":"xc-ac6","payload":{"dep_type":"blocks","depends_on":"xc-ac6"}}
{"type":"dep_add","timestamp":"2026-02-07T05:40:19.680411Z","issue_id":"xc-ac6","payload":{"dep_type":"blocks","depends_on":"xc-8bb"}}
{"type":"create","timestamp":"2026-02-07T05:40:19.70161Z","issue_id":"xc-9bf","payload":{"description":"After each command, read ~/.xc/usage.jsonl and display: Cost: $X.XX (1h) · $X.XX (24h) · $X.XX (7d) · $X.XX (30d). Suppress with --quiet.","priority":"2","title":"Cost footer on every command","type":"task"}}
{"type":"dep_add","timestamp":"2026-02-07T05:40:19.739003Z","issue_id":"xc-ac6","payload":{"dep_type":"blocks","depends_on":"xc-ac6"}}
{"type":"dep_add","timestamp":"2026-02-07T05:40:23.899234Z","issue_id":"xc-ac6","payload":{"dep_type":"blocks","depends_on":"xc-9bf"}}
{"type":"dep_add","timestamp":"2026-02-07T05:40:23.922034Z","issue_id":"xc-9bf","payload":{"dep_type":"blocks","depends_on":"xc-8bb"}}
{"type":"create","timestamp":"2026-02-07T05:40:23.944539Z","issue_id":"xc-0ef","payload":{"description":"xc budget set --daily 2.00 --action block|warn|confirm. Check accumulated spend before each request. Store in ~/.xc/budget.json.","priority":"2","title":"Budget enforcement","type":"task"}}
{"type":"dep_add","timestamp":"2026-02-07T05:40:23.982918Z","issue_id":"xc-ac6","payload":{"dep_type":"blocks","depends_on":"xc-ac6"}}
{"type":"dep_add","timestamp":"2026-02-07T05:40:28.304504Z","issue_id":"xc-ac6","payload":{"dep_type":"blocks","depends_on":"xc-0ef"}}
{"type":"dep_add","timestamp":"2026-02-07T05:40:28.334258Z","issue_id":"xc-0ef","payload":{"dep_type":"blocks","depends_on":"xc-9bf"}}
{"type":"create","timestamp":"2026-02-07T05:40:28.358919Z","issue_id":"xc-a01","payload":{"description":"Detailed cost breakdown: daily, weekly, monthly, by endpoint. Cross-reference with GET /2/usage/tweets.","priority":"2","title":"xc cost command","type":"task"}}
{"type":"dep_add","timestamp":"2026-02-07T05:40:28.401516Z","issue_id":"xc-ac6","payload":{"dep_type":"blocks","depends_on":"xc-ac6"}}
{"type":"dep_add","timestamp":"2026-02-07T05:40:33.955982Z","issue_id":"xc-ac6","payload":{"dep_type":"blocks","depends_on":"xc-a01"}}
{"type":"dep_add","timestamp":"2026-02-07T05:40:33.980015Z","issue_id":"xc-a01","payload":{"dep_type":"blocks","depends_on":"xc-8bb"}}
{"type":"create","timestamp":"2026-02-07T05:40:34.004761Z","issue_id":"xc-b90","payload":{"description":"Manage filtered stream rules: xc stream add 'query', xc stream rules, xc stream remove \u003cid\u003e, xc stream clear.","priority":"2","title":"xc stream rules (add/remove/list)","type":"task"}}
{"type":"dep_add","timestamp":"2026-02-07T05:40:34.044707Z","issue_id":"xc-2b2","payload":{"dep_type":"blocks","depends_on":"xc-b90"}}
{"type":"dep_add","timestamp":"2026-02-07T05:40:38.387388Z","issue_id":"xc-2b2","payload":{"dep_type":"blocks","depends_on":"xc-b90"}}
{"type":"create","timestamp":"2026-02-07T05:40:38.414591Z","issue_id":"xc-e3c","payload":{"description":"Connect to filtered stream, output posts as they arrive. --json for raw, --quiet for IDs only. Use SDK streaming with auto-reconnect.","priority":"2","title":"xc stream connect","type":"task"}}
{"type":"dep_add","timestamp":"2026-02-07T05:40:38.458804Z","issue_id":"xc-2b2","payload":{"dep_type":"blocks","depends_on":"xc-e3c"}}
{"type":"dep_add","timestamp":"2026-02-07T05:40:43.460484Z","issue_id":"xc-2b2","payload":{"dep_type":"blocks","depends_on":"xc-e3c"}}
{"type":"dep_add","timestamp":"2026-02-07T05:40:43.488097Z","issue_id":"xc-e3c","payload":{"dep_type":"blocks","depends_on":"xc-b90"}}
{"type":"create","timestamp":"2026-02-07T05:40:43.51811Z","issue_id":"xc-d91","payload":{"description":"xc media upload ./file, xc post 'text' --media ./img.png. Chunked upload for video (512MB). Use SDK or raw upload API.","priority":"2","title":"Media upload support","type":"task"}}
{"type":"dep_add","timestamp":"2026-02-07T05:40:43.564198Z","issue_id":"xc-80c","payload":{"dep_type":"blocks","depends_on":"xc-e3c"}}
{"type":"dep_add","timestamp":"2026-02-07T05:40:47.77843Z","issue_id":"xc-80c","payload":{"dep_type":"blocks","depends_on":"xc-d91"}}
{"type":"create","timestamp":"2026-02-07T05:40:47.808154Z","issue_id":"xc-f09","payload":{"description":"xc post 'first' --thread 'second' --thread 'third'. Post a thread as sequential replies.","priority":"2","title":"Thread support","type":"task"}}
{"type":"dep_add","timestamp":"2026-02-07T05:40:47.854732Z","issue_id":"xc-80c","payload":{"dep_type":"blocks","depends_on":"xc-f09"}}
{"type":"dep_add","timestamp":"2026-02-07T05:40:51.650229Z","issue_id":"xc-80c","payload":{"dep_type":"blocks","depends_on":"xc-f09"}}
{"type":"create","timestamp":"2026-02-07T05:40:51.677743Z","issue_id":"xc-897","payload":{"description":"xc dm send @user 'message', xc dm list, xc dm history @user.","priority":"2","title":"DM support","type":"task"}}
{"type":"dep_add","timestamp":"2026-02-07T05:40:51.722867Z","issue_id":"xc-80c","payload":{"dep_type":"blocks","depends_on":"xc-f09"}}
{"type":"dep_add","timestamp":"2026-02-07T05:40:55.627699Z","issue_id":"xc-80c","payload":{"dep_type":"blocks","depends_on":"xc-897"}}
{"type":"create","timestamp":"2026-02-07T05:40:55.654475Z","issue_id":"xc-b7f","payload":{"description":"xc bookmarks, xc lists, xc followers @user, xc following @user. Paginated output.","priority":"2","title":"Bookmarks, lists, followers/following","type":"task"}}
{"type":"dep_add","timestamp":"2026-02-07T05:40:55.700652Z","issue_id":"xc-80c","payload":{"dep_type":"blocks","depends_on":"xc-f09"}}
{"type":"dep_add","timestamp":"2026-02-07T05:41:00.138764Z","issue_id":"xc-80c","payload":{"dep_type":"blocks","depends_on":"xc-b7f"}}
{"type":"dep_add","timestamp":"2026-02-07T05:41:00.169658Z","issue_id":"xc-057","payload":{"dep_type":"blocks","depends_on":"xc-924"}}
{"type":"dep_add","timestamp":"2026-02-07T05:41:00.224506Z","issue_id":"xc-ac6","payload":{"dep_type":"blocks","depends_on":"xc-057"}}
{"type":"dep_add","timestamp":"2026-02-07T05:41:00.254701Z","issue_id":"xc-2b2","payload":{"dep_type":"blocks","depends_on":"xc-924"}}
{"type":"dep_add","timestamp":"2026-02-07T05:41:00.285351Z","issue_id":"xc-80c","payload":{"dep_type":"blocks","depends_on":"xc-057"}}
{"type":"close","timestamp":"2026-02-07T06:15:30.356468Z","issue_id":"xc-3e4","payload":{}}
{"type":"close","timestamp":"2026-02-07T06:15:30.389546Z","issue_id":"xc-160","payload":{}}
{"type":"close","timestamp":"2026-02-07T06:15:30.423651Z","issue_id":"xc-924","payload":{}}
{"type":"close","timestamp":"2026-02-07T06:15:30.458385Z","issue_id":"xc-057","payload":{}}
{"type":"close","timestamp":"2026-02-07T07:06:02.402307Z","issue_id":"xc-1bf","payload":{}}
{"type":"close","timestamp":"2026-02-07T07:06:02.437597Z","issue_id":"xc-8bb","payload":{}}
{"type":"close","timestamp":"2026-02-07T07:06:02.471324Z","issue_id":"xc-9bf","payload":{}}
{"type":"close","timestamp":"2026-02-07T07:06:02.505227Z","issue_id":"xc-0ef","payload":{}}
{"type":"close","timestamp":"2026-02-07T07:06:02.540537Z","issue_id":"xc-a01","payload":{}}
{"type":"close","timestamp":"2026-02-07T07:06:02.576999Z","issue_id":"xc-0fa","payload":{}}
{"type":"close","timestamp":"2026-02-07T07:06:02.610307Z","issue_id":"xc-ac6","payload":{}}
{"type":"create","timestamp":"2026-02-07T07:09:19.843475Z","issue_id":"xc-84a","payload":{"description":"Add a password/PIN protection mechanism for budget-changing commands (xc budget set, xc budget reset). This prevents agents or scripts from silently raising their own spending limits.\n\nImplementation:\n- xc budget lock --password \u003cpass\u003e — set a password on budget changes\n- xc budget unlock --password \u003cpass\u003e — temporarily unlock for changes\n- xc budget set/reset require the password when locked\n- Store password hash (bcrypt or argon2) in ~/.xc/budget.json\n- Read-only commands (xc budget show, xc cost) do NOT require password\n- Optional: --password flag on set/reset for one-shot unlock\n\nThis is critical for agent safety — prevents a runaway agent from disabling its own budget limits.","priority":"2","title":"Password-protect budget commands","type":"task"}}
{"type":"dep_add","timestamp":"2026-02-07T07:09:23.852456Z","issue_id":"xc-80c","payload":{"dep_type":"blocks","depends_on":"xc-84a"}}
{"type":"create","timestamp":"2026-02-07T07:09:44.973961Z","issue_id":"xc-bab","payload":{"description":"Comprehensive test coverage for the xc CLI. Unit tests for all lib modules, integration tests for commands.\n\nCoverage targets:\n- src/lib/config.ts — config load/save, migration from ~/.config/xc to ~/.xc\n- src/lib/cost.ts — cost logging, aggregation by time window, JSONL read/write\n- src/lib/budget.ts — budget set/check/enforce, password hashing/verification\n- src/lib/oauth.ts — PKCE flow setup, token refresh\n- src/lib/api.ts — client creation, token resolution, cost logging hook\n- src/lib/format.ts — post/user formatting\n- src/lib/resolve.ts — user ID resolution\n\n- src/commands/* — each command's argument parsing, output formatting, error handling\n\nUse vitest (already in devDeps). Mock the SDK Client for unit tests. Use temp dirs for config/cost files to avoid polluting real state.","priority":"2","title":"Test Suite","type":"epic"}}
{"type":"create","timestamp":"2026-02-07T07:09:50.637246Z","issue_id":"xc-045","payload":{"description":"Test coverage for all src/lib/ modules: config, cost, budget, format, resolve, api, oauth. Mock SDK Client. Use temp dirs for file operations. vitest.","priority":"2","title":"Unit tests for lib modules","type":"task"}}
{"type":"dep_add","timestamp":"2026-02-07T07:09:50.68922Z","issue_id":"xc-bab","payload":{"dep_type":"blocks","depends_on":"xc-f09"}}
{"type":"dep_add","timestamp":"2026-02-07T07:09:55.082177Z","issue_id":"xc-bab","payload":{"dep_type":"blocks","depends_on":"xc-045"}}
{"type":"create","timestamp":"2026-02-07T07:09:55.117909Z","issue_id":"xc-156","payload":{"description":"Test each command end-to-end with mocked SDK responses. Verify argument parsing, output format, error handling, --json flag, --quiet flag, cost footer.","priority":"2","title":"Integration tests for CLI commands","type":"task"}}
{"type":"dep_add","timestamp":"2026-02-07T07:09:55.1749Z","issue_id":"xc-bab","payload":{"dep_type":"blocks","depends_on":"xc-f09"}}
{"type":"dep_add","timestamp":"2026-02-07T07:09:58.932653Z","issue_id":"xc-bab","payload":{"dep_type":"blocks","depends_on":"xc-156"}}
{"type":"dep_add","timestamp":"2026-02-07T07:09:58.971926Z","issue_id":"xc-156","payload":{"dep_type":"blocks","depends_on":"xc-045"}}
{"type":"close","timestamp":"2026-02-07T07:27:04.267646Z","issue_id":"xc-b90","payload":{}}
{"type":"close","timestamp":"2026-02-07T07:27:04.306942Z","issue_id":"xc-e3c","payload":{}}
{"type":"close","timestamp":"2026-02-07T07:27:04.345091Z","issue_id":"xc-2b2","payload":{}}
{"type":"close","timestamp":"2026-02-07T07:27:04.381609Z","issue_id":"xc-f09","payload":{}}
{"type":"close","timestamp":"2026-02-07T07:50:58.386894Z","issue_id":"xc-897","payload":{}}
{"type":"close","timestamp":"2026-02-07T07:50:58.428891Z","issue_id":"xc-d91","payload":{}}
{"type":"close","timestamp":"2026-02-07T07:50:58.467967Z","issue_id":"xc-b7f","payload":{}}
{"type":"close","timestamp":"2026-02-07T07:50:58.509679Z","issue_id":"xc-84a","payload":{}}
{"type":"close","timestamp":"2026-02-07T07:50:58.552004Z","issue_id":"xc-80c","payload":{}}
{"type":"close","timestamp":"2026-02-07T08:07:12.908816Z","issue_id":"xc-045","payload":{}}
{"type":"close","timestamp":"2026-02-07T08:07:12.951525Z","issue_id":"xc-156","payload":{}}
{"type":"close","timestamp":"2026-02-07T08:07:12.990293Z","issue_id":"xc-bab","payload":{}}
{"type":"create","timestamp":"2026-02-07T18:39:39.84432Z","issue_id":"xc-44c","payload":{"description":"## Problem\n\nVideo uploads via xc media upload and xc post --media video.mp4 return HTTP 400. Image uploads work fine.\n\n## Root Cause\n\nThe X API v2 media upload endpoint (/2/media/upload) requires the chunked upload flow for videos:\n1. INIT — initialize upload, get media_id\n2. APPEND — upload file chunks\n3. FINALIZE — complete the upload\n4. STATUS — poll for processing completion\n\nCurrently xc uses the simple single-request upload which only works for images.\n\n## Reference\n\n- X API docs: https://docs.x.com/x-api/media/quickstart/media-upload-chunked\n- XDK SDK has upload, initializeUpload, appendUpload, finalizeUpload, uploadStatus methods\n\n## Acceptance Criteria\n\n- xc post text --media video.mp4 works for MP4 videos\n- Chunked upload with progress indication\n- Polls for processing completion before attaching to post\n- Works for videos up to X size limits (512MB for most tiers)","priority":"2","title":"Video upload: implement chunked upload flow","type":"feature"}}
